<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- TODO: правила для ЦПХ, лікарняних, відпусток, ПДФО кондагентам? -->
        <!-- регістри накопичення -->
        <!-- перегрупувати розрахунки, щоб було зручно рахувати лікарняні та відпускні -->
        <record id="ua_contrib_register_fop" model="hr.contribution.register">
            <field name="name">Всього нараховано</field>
            <!-- <field name="partner_id" ref="res_partner_pp"/> -->
        </record>
        <record id="ua_contrib_register_pdfo" model="hr.contribution.register">
            <field name="name">ПДФО</field>
            <!-- <field name="partner_id" ref="res_partner_pp"/> -->
        </record>
        <record id="ua_contrib_register_pdfo_psp" model="hr.contribution.register">
            <field name="name">ПДФО з ПСП</field>
            <!-- <field name="partner_id" ref="res_partner_pp"/> -->
        </record>
        <record id="ua_contrib_register_vz" model="hr.contribution.register">
            <field name="name">Військовий збір</field>
            <!-- <field name="partner_id" ref="res_partner_pp"/> -->
        </record>
        <record id="ua_contrib_register_esv" model="hr.contribution.register">
            <field name="name">Нараховано ЄСВ</field>
            <!-- <field name="partner_id" ref="res_partner_pp"/> -->
        </record>
        <record id="ua_contrib_register_esv_disable" model="hr.contribution.register">
            <field name="name">Нараховано ЄСВ інвалідам</field>
            <!-- <field name="partner_id" ref="res_partner_pp"/> -->
        </record>
        <record id="ua_contrib_register_esv_delta" model="hr.contribution.register">
            <field name="name">Нараховано ЄСВ на різницю між МЗП і ЗП</field>
            <!-- <field name="partner_id" ref="res_partner_pp"/> -->
        </record>
        <!-- info,  seq 1 - 19 -->
        <record id="hr_payroll_rules_ua_temp_oklad" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_temp"/>
            <field name="sequence">1</field>
            <field name="name">Місячний оклад</field>
            <field name="code">T_OKLAD</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.wage</field>
        </record>
        <record id="hr_payroll_rules_ua_temp_monthly_days" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_temp"/>
            <field name="sequence">2</field>
            <field name="name">Норма робочих днів</field>
            <field name="code">T_M_DAYS</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.monthly_days</field>
        </record>
        <record id="hr_payroll_rules_ua_temp_worked_days" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_temp"/>
            <field name="sequence">3</field>
            <field name="name">Відпрацьовано днів</field>
            <field name="code">T_W_DAYS</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = worked_days.WORK100 and worked_days.WORK100.number_of_days</field>
        </record>
        <!-- zp,  seq 20 - 39 -->
        <record id="hr_payroll_rules_ua_okl_dn" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_zp"/>
            <field name="sequence">20</field>
            <field name="name">Оклад за відпрацьовані дні</field>
            <field name="code">OKLAD_D</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result_qty = 1
result = contract.wage
result_rate = 100 * (worked_days.WORK100 and worked_days.WORK100.number_of_days) / payslip.monthly_days</field>
        </record>
        <record id="hr_payroll_rules_ua_zp_hr" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_zp"/>
            <field name="sequence">21</field>
            <field name="name">Тариф по годинах</field>
            <field name="code">ZP_HR</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result_qty = worked_days.WORK100 and worked_days.WORK100.number_of_hours + (worked_days.SV and worked_days.SV.number_of_hours or 0)
result = contract.wage</field>
        </record>
        <record id="hr_payroll_rules_ua_zp_d" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_zp"/>
            <field name="sequence">22</field>
            <field name="name">Тариф по днях</field>
            <field name="code">ZP_D</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result_qty = worked_days.WORK100.number_of_days + (worked_days.SV and worked_days.SV.number_of_days or 0)
result = contract.wage</field>
        </record>
        <!-- bonus,    seq 40 - 59 -->
        <record id="hr_payroll_rules_ua_zp_bonus_fix" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_bonus"/>
            <field name="sequence">40</field>
            <field name="name">Надбавка фіксованою сумою</field>
            <field name="code">BONUS_FIX</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = contract.bonus_fix > 0.0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.bonus_fix</field>
        </record>
        <record id="hr_payroll_rules_ua_zp_bonus_perc" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_bonus"/>
            <field name="sequence">41</field>
            <field name="name">Надбавка відсотком</field>
            <field name="code">BONUS_PERC</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = contract.bonus_perc > 0.0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.ZP
result_rate =contract.bonus_perc</field>
        </record>
        <!-- compns,    seq 60 - 79 -->
        <record id="hr_payroll_rules_ua_comp_index_cur" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_comp"/>
            <field name="sequence">60</field>
            <field name="name">Індексація окладу</field>
            <field name="code">INDEX_CUR</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = payslip.indexation_coef > 0.0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round((payslip.current_mzp * (worked_days.WORK100 and worked_days.WORK100.number_of_days) / payslip.monthly_days), 2)
result_rate = payslip.indexation_coef</field>
        </record>
        <record id="hr_payroll_rules_ua_comp_index_cur_hr" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_comp"/>
            <field name="sequence">61</field>
            <field name="name">Індексація погодинного тарифу</field>
            <field name="code">INDEX_CUR_HR</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = payslip.indexation_coef > 0.0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.current_mzp_hr
result_rate = payslip.indexation_coef
result_qty = (worked_days.WORK100 and worked_days.WORK100.number_of_days) + (worked_days.SV and worked_days.SV.number_of_days or 0)</field>
        </record>
        <record id="hr_payroll_rules_ua_comp_index_fix" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_comp"/>
            <field name="sequence">62</field>
            <field name="name">Індексація фіксована</field>
            <field name="code">INDEX_FIX</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = contract.index_fix > 0.0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.index_fix</field>
        </record>
        <!-- fop,    seq 80 - 99 -->
        <record id="hr_payroll_rules_ua_fop" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_fop"/>
            <field name="sequence">80</field>
            <field name="name">Всього нараховано</field>
            <field name="note">Враховується в адміністративних витратах</field>
            <field name="code">FOP</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round(categories.ZP, 2) + round(categories.BONUS, 2) + round(categories.COMPNS, 2)</field>
            <field name="register_id" ref="ua_contrib_register_fop"/>
        </record>
        <record id="hr_payroll_rules_ua_fop_zvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_fop"/>
            <field name="sequence">80</field>
            <field name="name">Всього нараховано ЗВВ</field>
            <field name="note">Враховується в загальновиробничих витратах</field>
            <field name="code">FOPZVV</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round(categories.ZP, 2) + round(categories.BONUS, 2) + round(categories.COMPNS, 2)</field>
            <field name="register_id" ref="ua_contrib_register_fop"/>
        </record><record id="hr_payroll_rules_ua_fop_pvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_fop"/>
            <field name="sequence">80</field>
            <field name="name">Всього нараховано ПВВ</field>
            <field name="note">Враховується в прямих виробничих витратах</field>
            <field name="code">FOPPVV</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round(categories.ZP, 2) + round(categories.BONUS, 2) + round(categories.COMPNS, 2)</field>
            <field name="register_id" ref="ua_contrib_register_fop"/>
        </record>
        <!-- utr,    seq 100 - 119 -->
        <record id="hr_payroll_rules_ua_utr_pdfo" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_utr"/>
            <field name="sequence">100</field>
            <field name="name">Утримано ПДФО</field>
            <field name="code">PDFO</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = (not contract.use_psp) or (categories.FOP >= (round(1.4*payslip.january_mzp/10)*10))</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP
result_rate = 18.0
result_qty=  1.0</field>
            <field name="register_id" ref="ua_contrib_register_pdfo"/>
        </record>
        <record id="hr_payroll_rules_ua_utr_pdfo_psp" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_utr"/>
            <field name="sequence">101</field>
            <field name="name">Утримано ПДФО з ПСП</field>
            <field name="code">PDFOPSP</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = contract.use_psp and ((round(1.4*payslip.january_mzp/10)*10) >= categories.FOP)</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP - 0.5*payslip.january_mzp
result_rate = 18.0
result_qty=  1.0</field>
            <field name="register_id" ref="ua_contrib_register_pdfo_psp"/>
        </record>
        <record id="hr_payroll_rules_ua_utr_vz" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_utr"/>
            <field name="sequence">102</field>
            <field name="name">Утримано військовий збір</field>
            <field name="code">VZ</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP
result_rate = 1.5
result_qty=  1.0</field>
            <field name="register_id" ref="ua_contrib_register_vz"/>
        </record>
        <!-- vypl,   seq 120 - 139 -->
        <record id="hr_payroll_rules_ua_vypl" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_vypl"/>
            <field name="sequence">120</field>
            <field name="name">До виплати</field>
            <field name="code">VYPL</field>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round(categories.FOP, 2) - round(categories.UTR, 2)</field>
        </record>
        <!-- nar,    seq 140 - 159 -->
        <record id="hr_payroll_rules_ua_nar_esv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">140</field>
            <field name="name">Нарахування ЄСВ</field>
            <field name="note">Враховується в адміністративних витратах</field>
            <field name="code">ESV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = not employee.disable</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP if (25 * payslip.current_mzp) > categories.FOP else (25 * payslip.current_mzp)
result_rate = 22.0</field>
            <field name="register_id" ref="ua_contrib_register_esv"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_zvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">140</field>
            <field name="name">Нарахування ЄСВ ЗВВ</field>
            <field name="note">Враховується в загальновиробничих витратах</field>
            <field name="code">ESVZVV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = not employee.disable</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP if (25 * payslip.current_mzp) > categories.FOP else (25 * payslip.current_mzp)
result_rate = 22.0</field>
            <field name="register_id" ref="ua_contrib_register_esv"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_pvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">140</field>
            <field name="name">Нарахування ЄСВ ПВВ</field>
            <field name="note">Враховується в прямих виробничих витратах</field>
            <field name="code">ESVPVV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = not employee.disable</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP if (25 * payslip.current_mzp) > categories.FOP else (25 * payslip.current_mzp)
result_rate = 22.0</field>
            <field name="register_id" ref="ua_contrib_register_esv"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_inv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">141</field>
            <field name="name">Нарахування ЄСВ інвалідам</field>
            <field name="note">Враховується в адміністративних витратах</field>
            <field name="code">ESVINV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = employee.disable</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP if (25 * payslip.current_mzp) > categories.FOP else (25 * payslip.current_mzp)
result_rate = 8.41</field>
            <field name="register_id" ref="ua_contrib_register_esv_disable"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_inv_zvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">141</field>
            <field name="name">Нарахування ЄСВ інвалідам ЗВВ</field>
            <field name="note">Враховується в загальновиробничих витратах</field>
            <field name="code">ESVINVZVV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = employee.disable</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP if (25 * payslip.current_mzp) > categories.FOP else (25 * payslip.current_mzp)
result_rate = 8.41</field>
            <field name="register_id" ref="ua_contrib_register_esv_disable"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_inv_pvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">141</field>
            <field name="name">Нарахування ЄСВ інвалідам ПВВ</field>
            <field name="note">Враховується в прямих виробничих витратах</field>
            <field name="code">ESVINVPVV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = employee.disable</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.FOP if (25 * payslip.current_mzp) > categories.FOP else (25 * payslip.current_mzp)
result_rate = 8.41</field>
            <field name="register_id" ref="ua_contrib_register_esv_disable"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_delta" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">142</field>
            <field name="name">Нарахування ЄСВ на різницю від МЗП</field>
            <field name="note">Враховується в адміністративних витратах</field>
            <field name="code">ESVDELTA</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = payslip.current_mzp > categories.FOP</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.current_mzp - categories.FOP
result_rate = 22.0</field>
            <field name="register_id" ref="ua_contrib_register_esv_delta"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_delta_zvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">142</field>
            <field name="name">Нарахування ЄСВ на різницю від МЗП ЗВВ</field>
            <field name="note">Враховується в загальновиробничих витратах</field>
            <field name="code">ESVDELTAZVV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = payslip.current_mzp > categories.FOP</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.current_mzp - categories.FOP
result_rate = 22.0</field>
            <field name="register_id" ref="ua_contrib_register_esv_delta"/>
        </record>
        <record id="hr_payroll_rules_ua_nar_esv_delta_pvv" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_ua_cat_nar"/>
            <field name="sequence">142</field>
            <field name="name">Нарахування ЄСВ на різницю від МЗП ПВВ</field>
            <field name="note">Враховується в прямих виробничих витратах</field>
            <field name="code">ESVDELTAPVV</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = payslip.current_mzp > categories.FOP</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.current_mzp - categories.FOP
result_rate = 22.0</field>
            <field name="register_id" ref="ua_contrib_register_esv_delta"/>
        </record>
    </data>
</odoo>
