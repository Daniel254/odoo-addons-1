<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template
            id="weche_customize_modal"
            inherit_id="theme_default.customize_modal"
            name="weche treehouse Customize Modal">
            <xpath expr="//table[@name='color']/tr" position="after">
                <td>
                    <label class="chd-color-combi">
                        <img
                            src="/theme_weche/static/src/img/theme/variant-weche.png"
                            alt="Weche"
                            class="chd-color-combi-img"/>
                        <input
                            name="colorvar"
                            type="radio"
                            data-xmlid="theme_weche.option_color_weche"/>
                    </label>
                </td>
            </xpath>
        </template>
        <template
            id="option_color_weche"
            name="option_color_weche"
            inherit_id="website.assets_frontend"
            active="False"
            customize_show="False">
            <xpath expr="." position="inside">
                <link
                    href="/theme_weche/static/src/less/option_color_weche.less"
                    rel="stylesheet"
                    type="text/less"/>
                <script
                    type="text/javascript"
                    src="/theme_weche/static/src/js/website_blog.js"/>
            </xpath>
        </template>

        <!-- hide created with odoo link -->
        <template
            id="weche_layout_footer_copyright1"
            inherit_id="website.layout_footer_copyright"
            name="Footer Copyright1">
            <xpath expr="//div[@class='container mt16 mb8']/div[@class='pull-right']" position="replace">
            </xpath>
        </template>

        <!-- hide author in blog posts list -->
        <template
            id="weche_blog_short_hide_author"
            inherit_id="website_blog.blog_post_short"
            name="Hide author on blog">
            <xpath expr="//div[@t-foreach='blog_posts']" position="replace">
                <div t-foreach="blog_posts" t-as="blog_post" class="mb32">
                    <t t-if="blog_post.blog_id.show_author">
                    <t t-if="blog_post.author_avatar">
                        <span t-if="blog_post.blog_id.show_author" t-field="blog_post.author_avatar" class="o_not_editable" t-field-options='{"widget": "image", "class": "img-circle pull-right mt16 media-object"}' />
                    </t>
                    </t>
                    <a t-attf-href="/blog/#{ slug(blog_post.blog_id) }/post/#{ slug(blog_post) }">
                        <h2 t-field="blog_post.name" class="mb4"><t t-if="not blog_post.name">Untitled Post</t></h2>
                    </a>
                    <div class="text-muted">
                            <h4 t-field="blog_post.subtitle" class="mb4 mt4"></h4>
                        <div name='blog_post_data' class='mb0'>
                            <t t-if="blog_post.blog_id.show_author">
                            <span t-field="blog_post.author_id" style="display: inline-block;" t-field-options='{
                                "widget": "contact",
                                "fields": ["name"]
                            }'/> &#8212;
                            </t>
                            <span t-field="blog_post.create_date" t-field-options='{"format": "dd MMMM yyyy"}'/>
                            <span t-if="len(blog_post.message_ids) &gt; 0">
                                &#8212; <t t-esc="len(blog_post.message_ids)"/>
                                <t t-if="len(blog_post.message_ids) &lt;= 1" >comment</t>
                                <t t-if="len(blog_post.message_ids) > 1">comments</t>
                            </span>
                            <span t-if="blog_post.visits &gt; 0">
                                &#8212; <t t-esc="blog_post.visits"/>
                                <t t-if="blog_post.visits &lt;= 1" >view</t>
                                <t t-if="blog_post.visits > 1">views</t>
                            </span>

                            <span t-if="not blog_post.website_published" class="label label-danger">not published</span>
                        </div>
                    </div>
                </div>
            </xpath>
        </template>
        <template
            id="weche_blog_complete_hide_author"
            inherit_id="website_blog.blog_post_complete"
            name="Hide author on blog">
            <xpath expr="(//div[@class='blog_title'])[1]" position="replace">
                <div class="blog_title">
                <h1 t-field="blog_post.name" id="blog_post_name" t-att-data-blog-id="blog_post.id" placeholder="Blog Post Title"/>
                <h2 t-field="blog_post.subtitle" placeholder="Subtitle"/>
                <p class="post-meta text-muted text-center" name="blog_post_data"/>
                <t t-if="blog_post.blog_id.show_author">
                <div>
                    <t t-if="blog_post.author_avatar">
                        <span t-field="blog_post.author_avatar" class="o_not_editable" t-field-options='{"widget": "image", "class": "img-circle", "style":"width: 30px; margin-right: 10px; display:inline"}' />
                    </t>
                    <span t-field="blog_post.author_id" style="display: inline-block;" t-field-options='{
                        "widget": "contact",
                        "fields": ["name"]
                    }'/>
                </div>
                </t>
                <div t-if="blog_post_cover_properties.get('resize_class') == 'cover cover_full'" id="blog_angle_down">
                    <strong><a href="#blog_content" class="fa fa-angle-down fa-3x fa-inverse mt4"/></strong>
                </div>
            </div>
            </xpath>
            <xpath expr="(//div[@class='blog_title'])[2]" position="replace">
                <div class="blog_title">
                <a class="hidden js_next" t-attf-href="/blog/#{ slug(next_post.blog_id) }/post/#{ slug(next_post) }/#wrap"/>
                <h1 t-field="next_post.name" placeholder="Blog Post Title"/>
                <h2 t-field="next_post.subtitle" placeholder="Subtitle"/>
                <t t-if="blog_post.blog_id.show_author">
                <div>
                    <t t-if="next_post.author_avatar">
                        <span t-field="next_post.author_avatar" t-field-options='{"widget": "image", "class": "img-circle", "style":"width: 30px; margin-right: 10px; display:inline"}' />
                    </t>
                    <span t-field="next_post.author_id" style="display: inline-block;" t-field-options='{
                            "widget": "contact",
                            "fields": ["name"]
                        }'/>
                </div>
                </t>
                <p class="mt32">Read Next <span class="fa fa-long-arrow-right"/></p>
            </div>
            </xpath>
        </template>
        <!-- <template
            id="weche_blog_atom_hide_author"
            inherit_id="website_blog.blog_feed"
            name="Hide author on blog">
            <xpath expr="//author" position="attributes">
                <attribute name="t-if">blog_post.blog_id.show_author</attribute>
            </xpath>
        </template> -->


        <!-- custom favicon -->
        <template
            id="weche_layout_favicon"
            inherit_id="website.layout"
            name="weche layout favicon"
            priority="17">
            <xpath expr="//head//link" position="after">
                <link
                    rel="shortcut icon"
                    href="/theme_weche/static/src/img/favicon.ico"
                    type="image/x-icon"/>
            </xpath>
        </template>

        <record id="weche_blog_view_form" model="ir.ui.view">
            <field name="name">weche.blog.form.inherit</field>
            <field name="model">blog.blog</field>
            <field name="inherit_id" ref="website_blog.view_blog_blog_form"/>
            <field name="arch" type="xml">
            <data>
                 <xpath expr="//field[@name='name']" position="after">
                    <field name="show_author"/>
                 </xpath>
            </data>
            </field>
        </record>
    </data>
</odoo>
